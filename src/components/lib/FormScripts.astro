<script is:inline src="/assets/js/jquery.min.js"></script>
<script is:inline>
inputs = document.getElementsByClassName("input-dynamic-label");

Array.from(inputs).forEach (function(elem) {
  elem.addEventListener('input', function() {
    elem.setAttribute('value', elem.value);
  })
})

textareas = document.getElementsByClassName("textarea-dynamic-label");

Array.from(textareas).forEach (function(elem) {
  elem.addEventListener('input', function() {
    elem.setAttribute('value', elem.value);
  })
})

</script>
<script is:inline>
function dynamicInputReset() {
  let inputs = document.getElementsByClassName("input-dynamic-label");
  let textareas = document.getElementsByClassName("textarea-dynamic-label");
  let radios = document.getElementsByClassName("radio-dynamic-label");
  let checkboxes = document.getElementsByClassName("checkbox-dynamic-label");

  Array.from(inputs).forEach( function(elem) {
    elem.setAttribute('value', "");
    elem.value = "";
  });

  Array.from(textareas).forEach( function(elem) {
    elem.setAttribute('value', "");
    elem.value = "";
  });

  Array.from(radios).forEach( function(elem) {
    elem.checked = false;
  });

  Array.from(checkboxes).forEach( function(elem) {
    elem.checked = false;
  });

  // resets checkboxes that are required
  $("fieldset[required=true]")
    .find('input[type=checkbox]')
    .prop('required', true);
}
</script>
<script is:inline>
function validateCheckbox (name) {
    $cbx_group = $(`input:checkbox[name=${name}]`);

    $cbx_group.prop('required', true);
    if($cbx_group.is(":checked")){
        $cbx_group.prop('required', false);
    }
}
</script>
<script>
  import { AsYouType } from 'libphonenumber-js';

  document.querySelectorAll('input[type=tel]').forEach(elem => {
    elem.addEventListener('input', function() {
      const asYouType = new AsYouType("US");
      elem.value = asYouType.input(elem.value);
    });
  });
</script>
